<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.UserMapper">

	<insert id="addUser" parameterType="user">
		insert into user(userName,passWord,name,address,picPath)
		values(#{userName},#{passWord},#{name},#{address},#{picPath})
	</insert>

	<select id="QueryUser" parameterType="user" resultType="user">
		select *
		from user where userName=#{userName} and passWord=#{passWord}
	</select>

	<update id="ModifyUser" parameterType="user">
		update user
		<trim prefix="set" suffixOverrides="," suffix="where id=#{id}">
			<if test="passWord!=null and passWord!=''">passWord=#{passWord},</if>
			<if test="address!=null and address!=''">address=#{address},</if>
			<if test="yes!=null and yes!=0">yes=#{yes},</if>
		</trim>
	</update>

	<select id="QueryUserById" parameterType="user" resultType="user">
		select * from user where id=#{id}
	</select>

	<select id="BakePass" parameterType="user" resultType="user">
		select passWord from user where userName=#{userName} and name=#{name}
	</select>

	<select id="ifExist" parameterType="string" resultType="Integer">
		select count(id) from user where userName=#{userName}
	</select>

	<select id="getUserCount" resultType="integer">
		select count(1) from user
		<trim prefix="where" prefixOverrides="and|or">
			<if test="name!=null and name!=''">and name like concat('%',#{name},'%')</if>
			<if test="yes!=null and yes!=''">and yes=#{yes}</if>
		</trim>
	</select>

	<select id="getUserList" resultType="user">
		select * from user
		<trim prefix="where" prefixOverrides="and|or">
			<if test="name!=null and name!=''">and name like concat('%',#{name},'%')</if>
			<if test="yes!=null and yes!=''">and yes=#{yes}</if>
		</trim>
		order by createDate 
		limit #{indexPage},#{pagesize}
	</select>

	<delete id="deleteById" parameterType="String">
		delete from user where id in
		<foreach collection="StringList" item="id" open="(" separator="," close=")">
		#{id}
		</foreach>
	</delete>


	<select id="getUserById" resultType="user" parameterType="java.lang.String">
		select * from user
		<trim prefix="where" prefixOverrides="and|or">
			<if test="_parameter!=null and _parameter!=''">and id=#{_parameter}</if>
		</trim>
	</select>



</mapper>